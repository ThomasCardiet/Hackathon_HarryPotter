"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[47,149,530,468,298],{3582:function(e,t,n){n.r(t),n.d(t,{CountDown:function(){return d},DEFAULT_INIT_TIME:function(){return l},MINUTE:function(){return c},SECOND:function(){return o}});var i=n(5893),s=n(4184),a=n.n(s),r=n(7294);let c=60,o=1e3,l=5*c,u=e=>{let t=Math.trunc(e/c);return"".concat(t.toString().padStart(2,"0"),":").concat((e-t*c).toString().padStart(2,"0"))},d=e=>{let{time:t,setTime:n,setParentState:s=null,start:c=!0}=e,[d,g]=(0,r.useState)(c),[m,h]=(0,r.useState)(l),[p,x]=(0,r.useState)(null);return(0,r.useEffect)(()=>{if(d&&null===p){h(t);let e=setInterval(()=>{n(e=>e-1)},o);x(e)}else clearInterval(p);return()=>clearInterval(p)},[d]),(0,r.useEffect)(()=>{t<=0&&(n(0),g(!1),s&&s(!0))},[t]),(0,i.jsx)("div",{className:a()("count-down",{warning:t<m/2&&t>m/4,dangerous:t<m/4}),children:(0,i.jsx)("p",{children:u(t)})})}},5149:function(e,t,n){n.r(t),n.d(t,{DraggableIngredient:function(){return m}});var i=n(5893),s=n(1193),a=n.n(s);n(6685);var r=n(7294),c=n(4184),o=n.n(c),l=n(4298);let u={x:0,y:0},d=(e,t)=>{if(!t)return!1;let n={x:e.getBoundingClientRect().left+parseInt(getComputedStyle(e).width)/2,y:e.getBoundingClientRect().top+parseInt(getComputedStyle(e).height)/2};return n.x>=t.x.min&&n.x<=t.x.max&&n.y>=t.y.min&&n.y<=t.y.max};var g=n(7521);let m=e=>{let{ingredient:t,dropBoxOffsets:n,dropIngredient:s}=e,c=(0,r.useRef)(null),m=(0,r.useRef)(null),[h,p]=(0,r.useState)(null),[x,N]=(0,r.useState)(!1),[I,v]=(0,r.useState)(!1),E=(0,r.useCallback)(()=>{var e;p(u),null===(e=m.current)||void 0===e||e.setState(u)},[p,m]),f=()=>{N(!0)},S=(e,t)=>{v(d(t.node,n))},R=(e,n)=>{N(!1),I&&s(t),v(!1),E()};(0,r.useEffect)(()=>{x?(w(0),D(0),j(1)):(w(40),D(40),j(1.2))},[x]);let[O,j]=(0,r.useState)(1.2),[C,w]=(0,r.useState)(40),[A,D]=(0,r.useState)(40);return(0,i.jsx)(g.Z,{reset:!0,tiltReverse:!0,glareEnable:!0,glareBorderRadius:"100px",glareReverse:!0,glareColor:"#FFF9F0",scale:O,transitionEasing:"cubic-bezier(.03,.98,.52,.99)",tiltMaxAngleX:C,tiltMaxAngleY:A,children:(0,i.jsx)(a(),{onStart:f,onDrag:S,onStop:R,nodeRef:c,ref:m,position:h,children:(0,i.jsxs)("div",{ref:c,className:o()("draggable-ingredient",{drag:x,droppable:I,"not-droppable":!I&&x}),children:[t.getImgComponent(),(0,i.jsx)("div",{className:"draggable-ingredient__icon",children:l.ICONS.PLUS})]})})})}},2530:function(e,t,n){n.r(t),n.d(t,{DropBlock:function(){return r}});var i=n(5893),s=n(7294),a=n(5468);let r=e=>{let{cauldron:t,setDropBoxOffsets:n}=e,r=(0,s.useRef)(null),[c]=(0,a.usePosition)(r);return(0,s.useEffect)(()=>{n(c)},[c]),(0,i.jsx)("div",{className:"drop-block",ref:r,children:t.getImgComponent()})}},5468:function(e,t,n){n.r(t),n.d(t,{usePosition:function(){return s}});var i=n(7294);let s=e=>{let[t,n]=(0,i.useState)(null);return(0,i.useEffect)(()=>{let t=e.current;if(t){let e={top:t.getBoundingClientRect().top,left:t.getBoundingClientRect().left},{width:i,height:s}=getComputedStyle(t);n({x:{min:e.left,max:e.left+parseInt(i)},y:{min:e.top,max:e.top+parseInt(s)}})}},[e]),[t,n]}},4298:function(e,t,n){n.r(t),n.d(t,{ICONS:function(){return a}});var i=n(5893);n(7294);var s=(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-6 h-6",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})});let a={PLUS:s}},6047:function(e,t,n){n.r(t),n.d(t,{Party:function(){return A}});var i=n(5893),s=n(7294),a=n(5149),r=n(2530),c=n(6685),o=n(4924);class l{getName(){return this.name}getIsMaterial(){return this.isMaterial}setName(e){this.name=e}setIsMaterial(e){this.isMaterial=e}constructor(e,t=!0){(0,o.Z)(this,"name",void 0),(0,o.Z)(this,"isMaterial",void 0),this.name=e,this.isMaterial=t}}let u={FOLDABLE:new l("pliable",!1),SILVER:new l("argent"),COPPER:new l("cuivre"),BRASS:new l("laiton")};class d{getName(){return this.name}getType(){return this.type}getImgPath(){return"".concat(this.img.basePath,"/").concat(this.img.name)}getImgComponent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return(0,i.jsx)("img",{src:this.getImgPath(),alt:"Picture of Cauldron",useMap:"#".concat(e)})}setName(e){this.name=e}setType(e){this.type=e}constructor(e,t=g.DEFAULT){(0,o.Z)(this,"type",void 0),(0,o.Z)(this,"name",void 0),(0,o.Z)(this,"img",{basePath:"/images/cauldrons",name:null}),this.type=e,this.name="Chaudron ".concat(e.getIsMaterial()?"en ":"").concat(e.getName()),this.img.name=t}}let g={DEFAULT:"cauldron_default.png"},m={FOLDABLE:new d(u.FOLDABLE),SILVER:new d(u.SILVER),COPPER:new d(u.COPPER),BRASS:new d(u.BRASS)};var h=n(1678);class p{getName(){return this.name}getIngredients(){return this.ingredients}getCauldron(){return this.cauldron}setName(e){this.name=e}setIngredients(e){this.ingredients=e}setCauldron(e){this.cauldron=e}constructor(e,t,n){(0,o.Z)(this,"name",void 0),(0,o.Z)(this,"ingredients",void 0),(0,o.Z)(this,"cauldron",void 0),this.name=e,this.ingredients=t,this.cauldron=n}}let x={ANTIDOT:new p("Antidote",[c.Wv.BEZOAR,c.Wv.ACONITE,c.Wv.ORPHIDIAN_SKIN],m.FOLDABLE),WIGGENWELD:new p("Wiggenweld",[c.Wv.SILVER_UNICORN_HORN,c.Wv.ACONITE],m.FOLDABLE),WIGGENWELD_EXTRA:new p("Wiggenweld extra",[c.Wv.OCTOPUS_POWDER,c.Wv.SILVER_UNICORN_HORN,c.Wv.ACONITE],m.SILVER),HERBICIDE:new p("Herbicide",[c.Wv.DRIED_NETTLES,c.Wv.PORCUPINE_QUILLS,c.Wv.SNAKE_HOOKS],m.COPPER),PIMENTINE:new p("Pimentine",[c.Wv.BICORN_HORN,c.Wv.MANDRAKE_ROOT],m.COPPER),PIMENTINE_EXTRA:new p("Pimentine extra",[c.Wv.OCTOPUS_POWDER,c.Wv.BICORN_HORN,c.Wv.MANDRAKE_ROOT],m.BRASS),VITAMIX:new p("Vitamix",[c.Wv.MUGWORT,c.Wv.ASPHODEL_ROOT,c.Wv.DICTAME],m.COPPER)},N=()=>Object.values(x),I=()=>(0,h.S)(N()).slice(0,3);var v=n(3695),E=n(4339),f=n(1163),S=n(1664),R=n.n(S),O=n(118),j=n(3582),C=n(5678);let w={INDICE:20,WRONG_INGREDIENT:5},A=e=>{let{user:t,stopGame:n,winner:o}=e,l=(0,f.useRouter)(),[u,d]=(0,s.useState)(t?t.house.name:"Ravenclaw"),[g,m]=(0,s.useState)((0,i.jsx)("img",{src:"/images/"+u+".png"})),[h,p]=(0,s.useState)([]),[x,N]=(0,s.useState)([]),[S,A]=(0,s.useState)(null),[D,_]=(0,s.useState)(!1),[P,T]=(0,s.useState)(j.DEFAULT_INIT_TIME),[b,L]=(0,s.useState)([]),[k,y]=(0,s.useState)(0),[W,B]=(0,s.useState)(0);(0,s.useEffect)(()=>{v.V.isLoggedUser()||l.push(E.F.getRoutes().LOGIN.slug),x.length||N((0,c.kt)()),b.length||L(I())},[]);let M=e=>{if("flip"===F||"flip"===G||"flip"===K)return C.Am.error("Impossible, vous lisez un indice !",{icon:"❌",theme:"light",position:"bottom-center"});let t=b[k].getIngredients()[W];e===t?(Y(!0),q(),C.Am.success("Ingr\xe9dient ajout\xe9",{icon:"\uD83E\uDDEA",theme:"light",position:"bottom-center"}),N(x.filter(t=>e!==t)),W<b[k].getIngredients().length-1?B(e=>e+1):k<b.length-1?(y(e=>e+1),B(0),N((0,c.kt)()),C.Am.success("Bien jou\xe9, potion suivante !",{icon:"\uD83E\uDDEA",theme:"light",position:"bottom-center"})):_(!0)):(T(e=>e-w.WRONG_INGREDIENT),C.Am.error("Mauvais ingr\xe9dient (- 5 sec)",{icon:"❌",theme:"light",position:"bottom-center"}))},[U,H]=(0,s.useState)([{indiceTaken:!1},{indiceTaken:!1},{indiceTaken:!1}]),[F,Z]=(0,s.useState)(""),[G,V]=(0,s.useState)(""),[K,z]=(0,s.useState)(""),[X,Y]=(0,s.useState)(!0),q=()=>{V(""),Z(""),z("")},Q=e=>{if(P<=w.INDICE+10)return C.Am.error("Tu nas plus le temps !",{icon:"❌",theme:"light",position:"bottom-center"});let t=U.find((t,n)=>n===e);if(!1===t.indiceTaken&&X){T(e=>e-w.INDICE);let n=[...U];t.indiceTaken=!0,H(n),0===e?Z("flip"):1===e?V("flip"):2===e&&z("flip"),Y(!1),setTimeout(()=>{q()},3e3)}};return(0,s.useEffect)(()=>{D&&n()},[D]),(0,s.useEffect)(()=>{o&&(_(!0),C.Am.success("".concat(o.name," est le grand gagnant !"),{icon:"\uD83D\uDC4A",theme:"light",position:"bottom-right"}))},[o]),(0,i.jsx)(i.Fragment,{children:D?(0,i.jsx)("section",{className:"success "+u,children:(0,i.jsxs)("aside",{className:"success-container",children:[(0,i.jsxs)("div",{className:"success-container-title",children:[(0,i.jsx)("h1",{className:"text-50 text-Harry text-yellow",children:(0,i.jsx)(O.kX,{from:{opacity:"0",scale:"0.4"},to:{opacity:"100%",scale:"1"},ease:"expo.out()",duration:6,stagger:.1,children:(0,i.jsx)(O.H5,{wrapper:(0,i.jsx)("span",{style:{display:"inline-block"}}),children:"Victoire de la maison"})})}),(0,i.jsx)("h1",{className:"text-100 text-Harry text-yellow",children:(0,i.jsx)(O.kX,{from:{opacity:"0",scale:"0.4"},to:{opacity:"100%",scale:"1"},ease:"expo.out()",duration:6,stagger:.1,children:(0,i.jsx)(O.H5,{wrapper:(0,i.jsx)("span",{style:{display:"inline-block"}}),children:u})})})]}),(0,i.jsx)("div",{className:"success-container-logo",children:g}),o&&(0,i.jsxs)("p",{className:"success-container-logo-name text-30 text-ProzaLibre-SemiBold text-yellow",children:["Le joueur ",o.name," a gagn\xe9 !"]}),(0,i.jsx)("ul",{className:"success-container-content",children:h.map((e,t)=>(0,i.jsxs)("li",{className:"text-30 text-white text-ProzaLibre-Regular",children:[(0,i.jsx)("img",{src:"/images/"+e.house+".png"}),e.name," - ",e.potionDone," / 3"]},t))}),(0,i.jsx)("div",{className:"success-container-button",children:(0,i.jsx)(R(),{href:"/choice",className:"btn-reset btn-yellow",children:"Rejouer"})})]})}):(0,i.jsxs)("div",{className:"party",children:[(0,i.jsx)(j.CountDown,{time:P,setTime:T,setParentState:_}),b&&b[k]&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"party__potion-name",children:[(0,i.jsxs)("h1",{children:["Potion (",k+1,"/",b.length,"):"," ",b[k].getName()]}),b[k].getIngredients()[W]&&(0,i.jsxs)("p",{children:["Ingr\xe9dient requis:"," ",(0,i.jsx)("span",{children:b[k].getIngredients()[W].name})]})]}),(0,i.jsx)(r.DropBlock,{cauldron:b[k].getCauldron(),setDropBoxOffsets:A})]}),(0,i.jsx)("div",{className:"indices",children:(0,i.jsx)("div",{className:"indices-container",children:U.map((e,t)=>0===t?(0,i.jsxs)("div",{onClick:e=>Q(t),className:"indices-container-item first "+F+(X?"":" inactive")+(!0===e.indiceTaken?" inactive":""),children:[(0,i.jsx)("div",{className:"indices-container-item-image"}),(0,i.jsx)("div",{className:"indices-container-item-background ",children:(0,i.jsx)("img",{src:"/images/carte.png"})}),(0,i.jsx)("div",{className:"content",children:b&&b[k]&&b[k].getIngredients()[W]&&b[k].getIngredients()[W].getImgComponent()})]},t):1===t?(0,i.jsxs)("div",{onClick:e=>Q(t),className:"indices-container-item second "+G+(X?"":" inactive")+(!0===e.indiceTaken?" inactive":""),children:[(0,i.jsx)("div",{className:"indices-container-item-image"}),(0,i.jsx)("div",{className:"indices-container-item-background",children:(0,i.jsx)("img",{src:"/images/carte.png"})}),(0,i.jsx)("div",{className:"content",children:b&&b[k]&&b[k].getIngredients()[W]&&b[k].getIngredients()[W].getImgComponent()})]},t):2===t?(0,i.jsxs)("div",{onClick:e=>Q(t),className:"indices-container-item third "+K+(X?"":" inactive")+(!0===e.indiceTaken?" inactive":""),children:[(0,i.jsx)("div",{className:"indices-container-item-image"}),(0,i.jsx)("div",{className:"indices-container-item-background",children:(0,i.jsx)("img",{src:"/images/carte.png"})}),(0,i.jsx)("div",{className:"content",children:b&&b[k]&&b[k].getIngredients()[W]&&b[k].getIngredients()[W].getImgComponent()})]},t):void 0)})}),(0,i.jsx)("ul",{className:"ingredients-block",children:x.map((e,t)=>(0,i.jsx)(a.DraggableIngredient,{dropBoxOffsets:S,ingredient:e,dropIngredient:M},t))})]})})}},6685:function(e,t,n){n.d(t,{AE:function(){return o},Wv:function(){return c},kt:function(){return l}});var i=n(4924),s=n(5893),a=n(1678);class r{getName(){return this.name}getBonus(){return this.bonus}getImgPath(){return"".concat(this.img.basePath,"/").concat(this.img.name)}getImgComponent(){return(0,s.jsx)("img",{src:this.getImgPath(),alt:"Picture of ingredient"})}setName(e){this.name=e}setBonus(e){this.bonus=e}constructor(e,t=0,n){(0,i.Z)(this,"name",void 0),(0,i.Z)(this,"bonus",void 0),(0,i.Z)(this,"img",{basePath:"/images/ingredients",name:null}),this.name=e,this.bonus=t,this.img.name=n}}let c={ASPHODEL_ROOT:new r("Racine d'asphod\xe8le",0,"asphodel_root.png"),NAPEL:new r("Napel",0,"nepal.png"),DRIED_NETTLES:new r("Orties s\xe9ch\xe9es",0,"dried_nettles.png"),DICTAME:new r("Dictame",0,"dictame.png"),MUGWORT:new r("Armoise",0,"mugwort.png"),MANDRAKE_ROOT:new r("Racine de mandragore",0,"mandrake_root.png"),ORPHIDIAN_SKIN:new r("Peau d'ophidien",0,"orphidian_skin.png"),PORCUPINE_QUILLS:new r("\xc9pines de porc-\xe9pic",0,"porcupine_quills.png"),OCTOPUS_POWDER:new r("Poudre de pieuvre",0,"octopus_powder.png"),SCARAB_EYES:new r("Yeux de scarab\xe9e",0,"scarab_eyes.png"),BICORN_HORN:new r("Corne de bicorne",0,"bicorn_horn.png"),SNAKE_HOOKS:new r("Crochets de serpent",0,"snake_hooks.png"),BEZOAR:new r("B\xe9zoard",0,"bezoar.png"),SILVER_UNICORN_HORN:new r("Corne de licorne en argent",0,"silver_unicorn_horn.png"),ACONITE:new r("Aconit",0,"aconit.png")},o=()=>Object.values(c),l=()=>(0,a.S)(o())},1678:function(e,t,n){n.d(t,{S:function(){return i}});let i=e=>{let t=e.length,n;for(;0!=t;)n=Math.floor(Math.random()*t),t--,[e[t],e[n]]=[e[n],e[t]];return e}}}]);